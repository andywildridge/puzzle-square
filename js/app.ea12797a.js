(function(t){function e(e){for(var o,i,r=e[0],c=e[1],h=e[2],u=0,d=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);p&&p(e);while(d.length)d.shift()();return s.push.apply(s,h||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},n={app:0},s=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/puzzle-square/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var h=0;h<r.length;h++)e(r[h]);var p=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"00bc":function(t,e,a){"use strict";a("a37c")},"05b8":function(t,e,a){"use strict";a("2112")},2112:function(t,e,a){},"4bda":function(t,e,a){"use strict";a("b253")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("7a23");function n(t,e,a,n,s,i){var r=Object(o["n"])("Stage");return Object(o["j"])(),Object(o["c"])(r,{shapes:s.shapes,pegs:s.pegs},null,8,["shapes","pegs"])}a("d81d");Object(o["l"])("data-v-13141106");var s={class:"backstage"},i={class:"offSet"},r={key:0},c={key:1,class:"info"},h=Object(o["g"])(" Drag the shapes into posiotion to fill the grid. Drag the edge of a shape to rotate, double click to filp. "),p=Object(o["f"])("a",{href:"https://www.happypuzzle.co.uk/30cubed/genius-square\n",target:"_blank"},"(Based on the Genius Square)",-1),u=[h,p];function d(t,e,a,n,h,p){var d=Object(o["n"])("Board3"),l=Object(o["n"])("Board2"),f=Object(o["n"])("Board"),m=Object(o["n"])("Shape");return Object(o["j"])(),Object(o["e"])(o["a"],null,[Object(o["h"])(d),Object(o["f"])("div",s,[Object(o["h"])(l)]),Object(o["f"])("div",{onMouseup:e[0]||(e[0]=function(){return p.mouseup&&p.mouseup.apply(p,arguments)}),onMousedown:e[1]||(e[1]=function(){return p.mousedown&&p.mousedown.apply(p,arguments)}),onMousemove:e[2]||(e[2]=function(){return p.mousemove&&p.mousemove.apply(p,arguments)}),class:"stage"},[Object(o["f"])("div",i,[Object(o["h"])(f,{pegs:a.pegs},null,8,["pegs"]),(Object(o["j"])(!0),Object(o["e"])(o["a"],null,Object(o["m"])(a.shapes,(function(t,e){return Object(o["j"])(),Object(o["c"])(m,{key:e,id:e,onMove:p.move,onRotate:p.rotate,onFlip:p.flip,shapeData:h.shapeData[e],position:{x:h.shapeData[e].x,y:h.shapeData[e].y,z:h.shapeData[e].z,size:h.shapeData[e].size,flip:h.shapeData[e].flip,rotate:h.shapeData[e].rotate||0}},null,8,["id","onMove","onRotate","onFlip","shapeData","position"])})),128))])],32),h.completed?(Object(o["j"])(),Object(o["e"])("div",r,"Completed!")):Object(o["d"])("",!0),h.completed?Object(o["d"])("",!0):(Object(o["j"])(),Object(o["e"])("p",c,u))],64)}Object(o["k"])();var l=a("2909");a("159b");Object(o["l"])("data-v-b8530ebe");var f={class:"board"};function m(t,e,a,n,s,i){var r=Object(o["n"])("Peg");return Object(o["j"])(),Object(o["e"])("div",f,[(Object(o["j"])(!0),Object(o["e"])(o["a"],null,Object(o["m"])(a.pegs,(function(t,e){return Object(o["j"])(),Object(o["c"])(r,{key:e,position:t},null,8,["position"])})),128))])}Object(o["k"])(),Object(o["l"])("data-v-08430529");var v=["x"];function b(t,e,a,n,s,i){return Object(o["j"])(),Object(o["e"])("div",{class:"peg",x:t.x,style:Object(o["i"])(i.cssProps)},null,12,v)}Object(o["k"])();a("99af");function g(){return Math.round(40*Math.random())+30}var y={name:"Peg",props:{position:Object},computed:{cssProps:function(){return{"--x":50*this.position.x+2+"px","--y":50*this.position.y+2+"px","border-radius":"".concat(g(),"% ").concat(g(),"% ").concat(g(),"% ").concat(g(),"% / ").concat(g(),"% ").concat(g(),"% ").concat(g(),"% ").concat(g(),"%")}}}};a("8963");y.render=b,y.__scopeId="data-v-08430529";var j=y,O={name:"Shape",components:{Peg:j},props:{pegs:Array},created:function(){console.log(this.pegs)}};a("d0d6");O.render=m,O.__scopeId="data-v-b8530ebe";var x=O;Object(o["l"])("data-v-e5bd3dac");var D={class:"board"};function I(t,e){return Object(o["j"])(),Object(o["e"])("div",D)}Object(o["k"])();a("00bc");const w={};w.render=I,w.__scopeId="data-v-e5bd3dac";var k=w;Object(o["l"])("data-v-255548cc");var M={class:"board"};function z(t,e){return Object(o["j"])(),Object(o["e"])("div",M)}Object(o["k"])();a("661b");const S={};S.render=z,S.__scopeId="data-v-255548cc";var _=S;Object(o["l"])("data-v-310d583e");var P=["viewBox"],X=["x","y","fill"];function Y(t,e,a,n,s,i){return Object(o["j"])(),Object(o["e"])("div",{ref:"shape",onMousedown:e[0]||(e[0]=Object(o["o"])((function(){return i.mousedown&&i.mousedown.apply(i,arguments)}),["prevent"])),onMousemove:e[1]||(e[1]=Object(o["o"])((function(){return i.mousemove&&i.mousemove.apply(i,arguments)}),["prevent"])),onMouseout:e[2]||(e[2]=function(){return i.mouseout&&i.mouseout.apply(i,arguments)}),onDblclick:e[3]||(e[3]=Object(o["o"])((function(){return i.dblclick&&i.dblclick.apply(i,arguments)}),["prevent"])),class:"shape"},[(Object(o["j"])(),Object(o["e"])("svg",{width:"100%",viewBox:s.viewbox},[Object(o["f"])("g",null,[(Object(o["j"])(!0),Object(o["e"])(o["a"],null,Object(o["m"])(s.defnCoords,(function(t,e){return Object(o["j"])(),Object(o["e"])("rect",{key:e,x:t.x+.02,y:t.y+.02,width:"0.975",height:"0.975",stroke:"rgb(85 85 85 / 75%)","stroke-width":"0.025",rx:"0.1",fill:a.shapeData.color,"data-target":"true"},null,8,X)})),128))])],8,P))],544)}Object(o["k"])();a("a9e3");var B=10,C=1;function A(t){var e=t.reduce((function(t,e,a){return e.forEach((function(e,o){e&&t.push({x:o,y:a})})),t}),[]);return e}var E={name:"Shape",props:{id:Number,shapeData:Object,position:Object},watch:{position:function(t){this.render(t.x,t.y,t.rotate,t.size,t.flip,t.z)}},mounted:function(){this.render(this.shapeData.x,this.shapeData.y)},data:function(){return{moveStart:{x:null,y:null},moveNow:{x:null,y:null},defnCoords:A(this.shapeData.defn),width:this.shapeData.defn[0].length,height:this.shapeData.defn.length,viewbox:"0 0 ".concat(this.shapeData.defn[0].length," ").concat(this.shapeData.defn.length)}},methods:{mouseout:function(){this.render(this.shapeData.x,this.shapeData.y,this.shapeData.rotate,this.shapeData.size,this.shapeData.flip,this.shapeData.z),B=10,C*=-1},mousemove:function(t){if(t.target.dataset.target){var e=this.$refs.shape.getBoundingClientRect(),a=t.target.getBoundingClientRect();(e.bottom-t.pageY<B||e.top-t.pageY>-B||e.right-t.pageX<B||e.left-t.pageX>-B)&&(a.top-t.pageY>-B&&a.left-t.pageX>-B||a.top-t.pageY>-B&&a.right-t.pageX<B||a.bottom-t.pageY<B&&a.left-t.pageX>-B||a.bottom-t.pageY<B&&a.right-t.pageX<B)?(this.render(this.shapeData.x,this.shapeData.y,this.shapeData.rotate+C,this.shapeData.size,this.shapeData.flip,this.shapeData.z),B=15):(this.render(this.shapeData.x,this.shapeData.y,this.shapeData.rotate,this.shapeData.size,this.shapeData.flip,this.shapeData.z),B=10,C*=-1)}},mousedown:function(t){if(t.target.dataset.target){var e=this.$refs.shape.getBoundingClientRect();if(e.bottom-t.pageY<10||e.top-t.pageY>-10||e.right-t.pageX<10||e.left-t.pageX>-10){var a={x:e.left+e.width/2,y:e.top+e.height/2},o=180*Math.atan2(t.pageY-a.y,t.pageX-a.x)/Math.PI;this.$emit("rotate",{id:this.id,startAngle:o-this.position.rotate,centre:a})}else this.$emit("move",this.id)}},dblclick:function(){this.$emit("flip",this.id)},render:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=this.$refs.shape,r={width:"".concat(50*this.width,"px"),height:"".concat(50*this.height,"px"),transform:"translate(".concat(t,"px, ").concat(e,"px) rotate(").concat(a,"deg) scale(").concat(o,", ").concat(n,")"),transformOrigin:"center",zIndex:s};i.animate([r,r],{duration:0,fill:"forwards"})}}};a("05b8");E.render=Y,E.__scopeId="data-v-310d583e";var R=E;a("b64b");function $(t,e,a){var o=Object.keys(t).reduce((function(e,o){return a===~~o&&"pegs"!==o||t[o].forEach((function(t){return e.push(t)})),e}),[]),n=e.some((function(t){return o.some((function(e){return e.x===t.x&&e.y===t.y}))}));return!n}var q=$;function T(t){var e=Object.keys(t).reduce((function(e,a){return t[a].forEach((function(t){t.x>=2&&t.x<=7&&t.y>=2&&t.y<=7&&e++})),e}),0);return e}var F=T;function G(t,e,a,o,n){return 180===n?{x:a-t,y:o-e}:90===n?{x:o-e,y:t}:270===n?{x:e,y:a-t}:{x:t,y:e}}var J=G,N=50,L=N;function H(t,e){var a,o=0,n=t[e].defn[0].length,s=t[e].defn.length,i=t[e].rotate?90*Math.round(t[e].rotate/90)%360:0;i<0&&(i=360+i);var r=null!==(a=t[e])&&void 0!==a&&a.flip?t[e].flip:1;i%180===90&&n!==s&&(o=L/2*(n-s));var c=Math.round((t[e].x+o)/L)*L-o,h=Math.round((t[e].y-o)/L)*L+o,p=c/L+o/L,u=h/L-o/L,d=Object(l["a"])(t[e].defn);-1===r&&(d=d.reverse());var f=K(d,i,p,u);return{x:c,y:h,rotate:i,gridCoords:f}}function K(t,e,a,o){var n=t[0].length-1,s=t.length-1,i=t.reduce((function(t,e,a){return e.forEach((function(o,n){e[n]&&t.push({x:n,y:a})})),t}),[]),r=i.map((function(t){return J(t.x,t.y,n,s,e)}));return r.map((function(t){return{x:t.x+a,y:t.y+o}}))}var Q=H,U={},V={},W={name:"Stage",components:{Board:x,Board2:k,Board3:_,Shape:R},props:{shapes:Array,pegs:Array},created:function(){var t=this;U.pegs=Object(l["a"])(this.pegs),this.shapeData.forEach((function(e,a){U[a]=Q(t.shapeData,a).gridCoords}))},data:function(){return{moveStart:{x:null,y:null},moveItem:null,completed:!1,shapeData:this.shapes.map((function(t){var e=t.x,a=t.y,o=t.color,n=t.defn;return{x:e*L,y:a*L,color:o,defn:n}}))}},methods:{move:function(t){this.moveItem={id:t,type:"move",startX:this.shapeData[t].x,startY:this.shapeData[t].y},this.shapeData[this.moveItem.id].z=1,this.shapeData[this.moveItem.id].size=1.025,V={x:this.shapeData[this.moveItem.id].x,y:this.shapeData[this.moveItem.id].y,rotate:this.shapeData[this.moveItem.id].rotate}},rotate:function(t){var e=t.centre,a=t.id,o=t.startAngle;this.moveItem={id:a,centre:e,startAngle:o,type:"rotate"},this.shapeData[this.moveItem.id].z=1,this.shapeData[this.moveItem.id].size=1.025,V={x:this.shapeData[this.moveItem.id].x,y:this.shapeData[this.moveItem.id].y,rotate:this.shapeData[this.moveItem.id].rotate}},flip:function(t){console.log("flip",t);var e=this.shapeData[t].flip?this.shapeData[t].flip:1;V={x:this.shapeData[t].x,y:this.shapeData[t].y,rotate:this.shapeData[t].rotate,flip:this.shapeData[t].flip},this.shapeData[t].flip=-1*e},mousedown:function(t){this.moveStart.x=t.pageX,this.moveStart.y=t.pageY},mouseup:function(){if(null===this.moveItem)return!1;this.moveStart.x=null,this.moveStart.y=null;var t=Q(this.shapeData,this.moveItem.id),e=t.x,a=t.y,o=t.rotate,n=t.gridCoords;if(q(U,n,this.moveItem.id))U[this.moveItem.id]=n;else{var s=V;e=s.x,a=s.y,o=s.rotate,this.shapeData[this.moveItem.id].x=e,this.shapeData[this.moveItem.id].y=a,this.shapeData[this.moveItem.id].rotate=o;var i=Q(this.shapeData,this.moveItem.id);e=i.x,a=i.y,o=i.rotate}this.shapeData[this.moveItem.id].x=e,this.shapeData[this.moveItem.id].y=a,console.log(e,a),this.shapeData[this.moveItem.id].rotate=o,this.shapeData[this.moveItem.id].z=0,this.shapeData[this.moveItem.id].size=1,this.moveItem=null,36===F(U)?(console.log("GRID COMPLETE!"),this.completed=!0):this.completed=!1},mousemove:function(t){if(null===this.moveItem)return!1;var e=t.pageX-this.moveStart.x,a=t.pageY-this.moveStart.y;if("move"===this.moveItem.type)this.shapeData[this.moveItem.id].x=this.moveItem.startX+e,this.shapeData[this.moveItem.id].y=this.moveItem.startY+a;else if("rotate"===this.moveItem.type){var o=this.moveItem.centre,n=180*Math.atan2(t.pageY-o.y,t.pageX-o.x)/Math.PI;this.shapeData[this.moveItem.id].rotate=n-this.moveItem.startAngle}var s=Q(this.shapeData,this.moveItem.id),i=s.gridCoords;q(U,i,this.moveItem.id)&&(U[this.moveItem.id]=i,V={x:this.shapeData[this.moveItem.id].x,y:this.shapeData[this.moveItem.id].y,rotate:this.shapeData[this.moveItem.id].rotate})}}};a("4bda");W.render=d,W.__scopeId="data-v-13141106";var Z=W,tt=[[[0,5],[5,0]],[[2,0],[2,1],[1,2],[1,1],[0,1],[1,0]],[[4,4],[4,5],[3,5],[4,3],[3,4],[5,4]],[[1,3],[1,4],[0,2],[2,5],[0,0],[0,3]],[[3,1],[2,4],[3,3],[3,2],[2,3],[2,2]],[[3,0],[5,5],[5,3],[4,2],[5,2],[4,1]],[[4,0],[5,1],[1,5],[0,4],[1,5]]];function et(){return tt.reduce((function(t,e){var a=e[Math.floor(Math.random()*e.length)];return t.push({x:a[0],y:a[1]}),t}),[])}var at=et,ot=[{x:0,y:10,color:"purple",defn:[[0,1],[1,1]]},{x:2,y:10,color:"yellow",defn:[[0,1,0],[1,1,1]]},{x:6,y:10,color:"orange",defn:[[1,1,1]]},{x:0,y:8,color:"cadetblue",defn:[[1,0,0],[1,1,1]]},{x:4,y:10,color:"red",defn:[[1,1,0],[0,1,1]]},{x:7,y:9,color:"brown",defn:[[1,1]]},{x:3,y:9,color:"grey",defn:[[1,1,1,1]]},{x:9,y:10,color:"green",defn:[[1,1],[1,1]]},{x:9,y:9,color:"blue",defn:[[1]]}],nt=ot,st={name:"App",components:{Stage:Z},data:function(){return{pegs:at().map((function(t){return{x:t.x+2,y:t.y+2}})),shapes:nt}}};a("c5a2");st.render=n;var it=st;Object(o["b"])(it).mount("#app")},"661b":function(t,e,a){"use strict";a("ff01")},8963:function(t,e,a){"use strict";a("9e0e")},"9e0e":function(t,e,a){},a37c:function(t,e,a){},b253:function(t,e,a){},be50:function(t,e,a){},c5a2:function(t,e,a){"use strict";a("be50")},d0d6:function(t,e,a){"use strict";a("f210")},f210:function(t,e,a){},ff01:function(t,e,a){}});
//# sourceMappingURL=app.ea12797a.js.map